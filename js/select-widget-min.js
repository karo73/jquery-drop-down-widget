/*
*
* Author Karo Hakobyan
* Copyright Â© 2015 http://www.jsliders.com
*
*/

"use strict";$.widget("ui.selectWidget",{options:{change:function(e){return e},effect:"slide",keyControl:!0,speed:200,scrollHeight:250},_create:function(){this._selectFunctional()},_selectFunctional:function(){function e(e){return $("li.active",d).removeClass("active"),$("li",d).eq(e).addClass("active"),$("option[selected]",t).removeAttr("selected"),c.eq(e).prop("selected",!0),t.val(c.eq(e).val()),l.text(c.eq(e).text()),r=e,m&&(t.change(c.eq(e).val()),m(t.val())),e}function s(){for(var e=0,s=$(".select-items",d),t=0,i=s.length;i>t&&!$(s[t]).hasClass("active");t++)e+=$(s[t]).outerHeight();d.stop().animate({scrollTop:e},f)}if(this.element.hasClass("installed"))return!1;this.element.addClass("installed");var t=this.element,i=$("<div>").addClass("select-main"),l=$("<div>").addClass("select-set"),n=$("<div>").addClass("select-arrow"),a=$("<div>").addClass("select-block"),d=$("<ul>").addClass("select-list"),o=t.find("option[selected]").length,c=$("option",t),r=0,v=$("input[type=reset]",t.parents("form")),f=this.options.speed,u=this.options.keyControl,p=this.options.effect,m=this.options.change,C=this.options.scrollHeight;i.append(n),i.append(l),a.append(d),i.append(a),t.after(i),t.hide(),a.hide(),c.each(function(e,s){d.append($("<li>").addClass("select-items").text($(s).text()))}),v.click(function(){$(c,$(this).parents("form")).each(function(e,s){return""!=$(s).val()||$(s).is(":selected")?void 0:($(".select-items:first",d).click(),!1)})}),t.attr("disabled")&&i.addClass("disabled"),o?(t.val(t.find("option[selected]").val()),$("li",d).eq(t.find("option[selected]").index()).addClass("active"),l.text(t.find("option[selected]").text())):(t.val(c.first().val()),$("li:first",d).addClass("active"),l.text(c.first().text())),r=$("option[selected]",t).index(),$("li",d).click(function(){var s=$(this).index();r=s,e(s)}),C&&a.height()>C&&d.css("height",C).css("overflow","auto"),n.click(function(){l.click()}),l.click(function(){var t=$(this);return t.parent(i).hasClass("disabled")?!1:(t.prev().hasClass("reverse")?(t.parent().removeClass("z-index"),t.prev().removeClass("reverse")):($(".select-arrow").removeClass("reverse"),t.prev().addClass("reverse"),t.parent().addClass("z-index")),void(a.is(":hidden")?($(".select-block").is(":visible")&&("slide"==p?($(".select-block").slideUp(f/2),$(".select-main").removeClass("z-index")):"fade"==p&&($(".select-block").fadeOut(f/2),$(".select-main").removeClass("z-index")),$(document).unbind("keydown")),$(document).bind("click",function(e){$(e.target).is(".select-set")||$(e.target).is(".select-arrow")||$(".select-block").is(":visible")&&("slide"==p?(a.slideUp(f/2,function(){$(".select-main").removeClass("z-index")}),$(".select-arrow").removeClass("reverse")):"fade"==p&&(a.fadeOut(f/2,function(){$(".select-main").removeClass("z-index")}),$(".select-arrow").removeClass("reverse")),$(document).unbind("click keydown"))}),"slide"==p?(a.slideDown(f),t.parent().addClass("z-index"),s()):"fade"==p&&(a.fadeIn(f),t.parent().addClass("z-index"),s()),u&&$(document).bind("keydown",function(t){var i=t.keyCode;40==i&&(r<c.length-1&&(r=-1==r?0:r,e(r+=1),s()),t.preventDefault()),38==i&&(r>0&&(e(r-=1),s()),t.preventDefault()),13==i&&("slide"==p?a.slideUp(f/2,function(){$(".select-main").removeClass("z-index")}):"fade"==p&&a.fadeOut(f/2,function(){$(".select-main").removeClass("z-index")}),$(".select-arrow").removeClass("reverse"),$(document).unbind("keydown"),t.preventDefault())})):("slide"==p?(a.slideUp(f/2,function(){$(".select-main").removeClass("z-index")}),$(".select-arrow").removeClass("reverse")):"fade"==p&&(a.fadeOut(f/2,function(){$(".select-main").removeClass("z-index")}),$(".select-arrow").removeClass("reverse")),$(document).unbind("keydown"))))})}});
